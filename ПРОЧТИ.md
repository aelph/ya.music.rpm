# Yandex Music RPM Workaround for Fedora/openSUSE

Этот репозиторий содержит инструменты для адаптации официального `.deb` пакета Яндекс Музыки для использования в RPM-дистрибутивах (Fedora, openSUSE).

## Особенности сборки

- **Hi-Res Audio:** Подтверждена стабильная работа на частотах до **176,4 кГц** через ALSA.
- **Bluetooth:** Оптимизировано для работы с кодеком LDAC (проверено на Sony WH-XB900N, 88.2 кГц).
- **Название пакета** Alien автоматически инкрементирует версию пакета для корректной работы пакетного менеджера. Вы получите надпись Beta, там где в приложении указывается номер сборки.
- **Интеграция:** Исправлены категории меню (теперь отображается в разделе "Музыка") и исправлено отображение иконок в панели задач (StartupWMClass). Эти изменения только в ярлыке приложения. Сам исходный код не изменялся.

## Как использовать

1. Склонируйте репозиторий.
2. Установите зависимости: `sudo dnf install alien curl`.
3. Запустите скрипт сборки:
   - `sudo ./build_rpm.sh`
   - `fakeroot ./build_rpm.sh` (Безопасный)
   - `./build_rpm.sh` (Нежелательный)
4. Установите полученный пакет: `sudo dnf install ./*.rpm`.

## Почему не готовый RPM?

Чтобы не нарушать лицензионные права правообладателя, в этом репозитории бинарный файл приведён только в качестве примера успешной работы скрипта.

Скрипт только автоматизирует процесс конвертации официального пакета, предоставленного Яндексом, для вашей локальной системы. 

Никаких изменений в исходный код не вносится, производится только пересборка пакета с использованием инструмента alien.

## Обновление

Скриптом или вручную:

```sh
sudo dnf install ./путь_к_новому_пакету.rpm
```

После ручного обновления нужно править ярлык:

```sh
sudo cp ./yandexmusic.desktop /usr/share/applications/
```

## Решение проблем со звуком

Если у вас возникают прерывания на Bluetooth-наушниках, рекомендуется использовать кратную частоту дискретизации (например, 88.2 кГц для исходника 176.4 кГц).